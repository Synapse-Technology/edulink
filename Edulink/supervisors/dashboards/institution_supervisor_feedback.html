<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Institution Supervisor Feedback</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-100">
  <!-- Sidebar Container -->
  <div id="sidebar-container"></div>

  <!-- Main Content -->
  <main class="main-content min-h-screen p-6">
    <div class="max-w-6xl mx-auto">
      <!-- Header Section -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <h1 class="text-2xl font-bold text-gray-800 mb-2">Institution Supervisor Logbook Review</h1>
        <p class="text-gray-600">Review and provide feedback on intern logbooks</p>
      </div>

      <!-- Intern Selection -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <div class="mb-4">
          <label for="internSelect" class="block text-lg font-semibold text-gray-700 mb-2">Select Intern:</label>
          <select id="internSelect" class="w-full border-2 border-gray-300 p-2 rounded-lg focus:border-teal-500 focus:outline-none">
            <option value="0">Alice</option>
            <option value="1">Brian</option>
          </select>
        </div>
      </div>

      <!-- Weekly Reports Section -->
      <div id="reportsSection" class="space-y-6">
        <!-- Dynamic content will be inserted here -->
      </div>
    </div>
  </main>

  <script src="layout.js"></script>
  <script>
    // Sample data
    const interns = [
      {
        name: 'Alice',
        dailyReports: [
          ['Completed onboarding', 'Started project research', 'Attended team meeting', 'Worked on documentation', 'Reviewed code'],
          ['Developed project plan', 'Met with mentor', 'Worked on feature X', 'Tested feature X', 'Prepared weekly summary']
        ],
        weeklyReports: [
          'Week 1: Completed onboarding and started project research.',
          'Week 2: Developed initial project plan and met with team.'
        ],
        institutionComments: [
          'Institution: Keep up the good work.',
          ''
        ],
        institutionCommentsVisible: [
          true,
          true
        ],
        companyComments: [
          'Great work, Alice!',
          ''
        ]
      },
      {
        name: 'Brian',
        dailyReports: [
          ['Assisted with data entry', 'Learned about company systems', 'Shadowed a senior', 'Helped with filing', 'Attended training'],
          ['Prepared weekly reports', 'Attended training', 'Worked on data cleanup', 'Helped with presentations', 'Met with supervisor']
        ],
        weeklyReports: [
          'Week 1: Assisted with data entry and learned about company systems.',
          'Week 2: Helped prepare weekly reports and attended training.'
        ],
        institutionComments: [
          '',
          ''
        ],
        institutionCommentsVisible: [
          true,
          true
        ],
        companyComments: [
          '',
          ''
        ]
      }
    ];

    function renderReports() {
      const intern = interns[currentInternIdx];
      let html = '';
      
      for (let wIdx = 0; wIdx < intern.weeklyReports.length; wIdx++) {
        html += `
          <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <!-- Week Header -->
            <div class="bg-teal-500 text-white px-6 py-4">
              <h2 class="text-xl font-semibold">Week ${wIdx + 1}</h2>
            </div>
            
            <!-- Daily Reports -->
            <div class="p-6 border-b">
              <h3 class="text-lg font-semibold text-gray-700 mb-3">Daily Activities</h3>
              <ul class="list-disc ml-6 space-y-2">
                ${intern.dailyReports[wIdx].map((day, dIdx) => `
                  <li class="text-gray-600">Day ${dIdx + 1}: ${day}</li>
                `).join('')}
              </ul>
            </div>

            <!-- Weekly Report -->
            <div class="p-6 border-b bg-gray-50">
              <h3 class="text-lg font-semibold text-gray-700 mb-3">Weekly Summary</h3>
              <p class="text-gray-600">${intern.weeklyReports[wIdx]}</p>
            </div>

            <!-- Institution Supervisor Feedback -->
            <div class="p-6">
              <h3 class="text-lg font-semibold text-gray-700 mb-3">Your Feedback</h3>
              <form onsubmit="submitInstitutionComment(event, ${wIdx})">
                <textarea 
                  id="institutionCommentInput${wIdx}" 
                  class="w-full border-2 border-gray-300 p-3 rounded-lg mb-3 min-h-[100px] focus:border-teal-500 focus:outline-none"
                  placeholder="Enter your feedback here..."
                >${intern.institutionComments[wIdx] || ''}</textarea>
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-2 sm:space-y-0">
                  <div class="flex items-center space-x-2">
                    <input 
                      type="checkbox" 
                      id="visibleToStudent${wIdx}" 
                      class="w-4 h-4 text-teal-600 border-gray-300 rounded focus:ring-teal-500"
                      ${intern.institutionCommentsVisible[wIdx] ? 'checked' : ''}
                    >
                    <label for="visibleToStudent${wIdx}" class="text-sm text-gray-600">
                      Make visible to student
                    </label>
                  </div>
                  <button type="submit" class="bg-teal-500 text-white px-6 py-2 rounded-lg hover:bg-teal-600 transition-colors">
                    Save Feedback
                  </button>
                </div>
              </form>
              ${intern.institutionComments[wIdx] ? `
                <div class="mt-4 p-4 ${intern.institutionCommentsVisible[wIdx] ? 'bg-green-50 border-green-200' : 'bg-yellow-50 border-yellow-200'} border rounded-lg">
                  <div class="text-sm font-medium ${intern.institutionCommentsVisible[wIdx] ? 'text-green-800' : 'text-yellow-800'}">
                    Saved Feedback (${intern.institutionCommentsVisible[wIdx] ? 'Visible to Student' : 'Hidden from Student'})
                  </div>
                  <div class="mt-1 text-gray-600">${intern.institutionComments[wIdx]}</div>
                </div>
              ` : ''}
            </div>

            <!-- Company Supervisor's Comments -->
            <div class="p-6 bg-gray-50 border-t">
              <h3 class="text-lg font-semibold text-gray-700 mb-3">Company Supervisor's Comments</h3>
              <div class="text-gray-600">
                ${intern.companyComments[wIdx] || '<span class="text-gray-400">No comments yet</span>'}
              </div>
            </div>
          </div>
        `;
      }
      
      document.getElementById('reportsSection').innerHTML = html;
    }

    let currentInternIdx = 0;

    window.submitInstitutionComment = function(e, wIdx) {
      e.preventDefault();
      const val = document.getElementById('institutionCommentInput' + wIdx).value.trim();
      const visible = document.getElementById('visibleToStudent' + wIdx).checked;
      interns[currentInternIdx].institutionComments[wIdx] = val;
      interns[currentInternIdx].institutionCommentsVisible[wIdx] = visible;
      renderReports();
    }

    document.getElementById('internSelect').addEventListener('change', function() {
      currentInternIdx = parseInt(this.value);
      renderReports();
    });

    // Initial render
    renderReports();
  </script>
</body>
</html> 