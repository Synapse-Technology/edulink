<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Feedback</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-100">
  <!-- Sidebar Container -->
  <div id="sidebar-container"></div>
  <aside id="sidebar" class="w-64 bg-teal-800 text-white min-h-screen p-6 fixed top-0 left-0 z-30 transform -translate-x-full md:translate-x-0 transition-transform duration-300">
    <h2 class="text-2xl font-bold mb-6">Supervisor Menu</h2>
    <nav class="space-y-4">
      <a href="#" class="block py-2 px-4 rounded hover:bg-teal-700 transition">Dashboard</a>
      <a href="assigned_interns.html" class="block py-2 px-4 rounded hover:bg-teal-700 transition">Assigned Interns</a>
      <a href="logbooks.html" class="block py-2 px-4 rounded hover:bg-teal-700 transition">Logbook Submissions</a>
      <a href="settings.html" class="block py-2 px-4 rounded hover:bg-teal-700 transition">Settings</a>
    </nav>
  </aside>


  <!-- Main Content -->
  <main class="main-content min-h-screen p-6">
    <div class="bg-white p-8 rounded shadow w-full max-w-3xl mx-auto">
      <h1 class="text-2xl font-bold mb-6 text-center">Intern Logbook Feedback</h1>
      <div class="mb-6">
        <label for="internSelect" class="block mb-2 font-medium">Select Intern:</label>
        <select id="internSelect" class="w-full border px-3 py-2 rounded">
          <option value="0">Alice</option>
          <option value="1">Brian</option>
        </select>
      </div>
      <div id="reportsSection" class="mb-6">
        <!-- All week content will be rendered here -->
      </div>
      <div id="endOfInternshipSection" class="mb-6">
        <!-- End of internship remarks and grading -->
      </div>
    </div>
  </main>

  <script src="layout.js"></script>
  <script>
    // Sample data
    const interns = [
      {
        name: 'Alice',
        dailyReports: [
          ['Completed onboarding', 'Started project research', 'Attended team meeting', 'Worked on documentation', 'Reviewed code'],
          ['Developed project plan', 'Met with mentor', 'Worked on feature X', 'Tested feature X', 'Prepared weekly summary']
        ],
        weeklyReports: [
          'Week 1: Completed onboarding and started project research.',
          'Week 2: Developed initial project plan and met with team.'
        ],
        weeklyComments: [
          'Great start, keep up the momentum!',
          ''
        ],
        orgWeeklyComments: [
          'Welcome to the organization! We are excited to have you.',
          'Organization is happy with your progress.'
        ],
        endRemarks: '',
        grade: ''
      },
      {
        name: 'Brian',
        dailyReports: [
          ['Assisted with data entry', 'Learned about company systems', 'Shadowed a senior', 'Helped with filing', 'Attended training'],
          ['Prepared weekly reports', 'Attended training', 'Worked on data cleanup', 'Helped with presentations', 'Met with supervisor']
        ],
        weeklyReports: [
          'Week 1: Assisted with data entry and learned about company systems.',
          'Week 2: Helped prepare weekly reports and attended training.'
        ],
        weeklyComments: [
          '',
          ''
        ],
        orgWeeklyComments: [
          'Brian is adapting well to the team.',
          ''
        ],
        endRemarks: '',
        grade: ''
      }
    ];
    let currentInternIdx = 0;

    function renderReports() {
      const intern = interns[currentInternIdx];
      let html = '';
      html += `<h2 class='font-semibold mb-4'>${intern.name}'s Weekly Logbook</h2>`;
      for (let wIdx = 0; wIdx < intern.weeklyReports.length; wIdx++) {
        html += `<div class='mb-6 p-4 bg-gray-50 rounded border'>`;
        html += `<div class='mb-2 font-semibold text-lg'>Week ${wIdx + 1}</div>`;
        html += `<div class='mb-2'><span class='font-semibold'>Daily Reports:</span><ul class='list-disc ml-6'>`;
        intern.dailyReports[wIdx].forEach((day, dIdx) => {
          html += `<li>Day ${dIdx + 1}: ${day}</li>`;
        });
        html += '</ul></div>';
        html += `<div class='mb-2'><span class='font-semibold'>Weekly Report:</span> <span>${intern.weeklyReports[wIdx]}</span></div>`;
        html += `<form class='mb-2' onsubmit='submitWeeklyComment(event,${wIdx})'>`;
        html += `<label class='block mb-1'>Supervisor Comment:</label>`;
        html += `<textarea class='w-full border px-3 py-2 rounded mb-1' rows='2' id='weeklyCommentInput${wIdx}'>${intern.weeklyComments[wIdx] || ''}</textarea>`;
        html += `<button type='submit' class='px-3 py-1 bg-blue-600 text-white rounded'>Save Comment</button>`;
        html += `</form>`;
        html += `<div class='text-sm text-gray-700 mb-2'><span class='font-semibold'>Saved Supervisor Comment:</span> ${intern.weeklyComments[wIdx] ? intern.weeklyComments[wIdx] : '<span class="text-gray-400">No comment yet.</span>'}</div>`;
        // Organization comment section (read-only)
        html += `<div class='text-sm text-gray-700'><span class='font-semibold'>Organization Weekly Comment (visible to both student and supervisor):</span> ${intern.orgWeeklyComments[wIdx] ? intern.orgWeeklyComments[wIdx] : '<span class="text-gray-400">No comment yet.</span>'}</div>`;
        html += `</div>`;
      }
      document.getElementById('reportsSection').innerHTML = html;
    }

    function renderEndOfInternshipSection() {
      const intern = interns[currentInternIdx];
      let html = `<h2 class='font-semibold mb-2'>End of Internship Remarks & Grading</h2>`;
      html += `<form onsubmit='submitEndRemarks(event)'>`;
      html += `<label class='block mb-1'>Remarks:</label>`;
      html += `<textarea class='w-full border px-3 py-2 rounded mb-2' rows='3' id='endRemarksInput'>${intern.endRemarks || ''}</textarea>`;
      html += `<label class='block mb-1'>Grade:</label>`;
      html += `<input type='text' class='w-full border px-3 py-2 rounded mb-2' id='gradeInput' value='${intern.grade || ''}' placeholder='e.g. A, B, C, Excellent, etc.' />`;
      html += `<button type='submit' class='px-4 py-2 bg-green-600 text-white rounded'>Save</button>`;
      html += `</form>`;
      if (intern.endRemarks || intern.grade) {
        html += `<div class='mt-2 p-2 bg-gray-50 border rounded'><span class='font-semibold'>Saved Remarks:</span> ${intern.endRemarks || '<span class="text-gray-400">None</span>'}<br/><span class='font-semibold'>Saved Grade:</span> ${intern.grade || '<span class="text-gray-400">None</span>'}</div>`;
      }
      document.getElementById('endOfInternshipSection').innerHTML = html;
    }

    window.submitWeeklyComment = function(e, wIdx) {
      e.preventDefault();
      const val = document.getElementById('weeklyCommentInput' + wIdx).value.trim();
      interns[currentInternIdx].weeklyComments[wIdx] = val;
      renderReports();
    }

    window.submitEndRemarks = function(e) {
      e.preventDefault();
      const remarks = document.getElementById('endRemarksInput').value.trim();
      const grade = document.getElementById('gradeInput').value.trim();
      interns[currentInternIdx].endRemarks = remarks;
      interns[currentInternIdx].grade = grade;
      renderEndOfInternshipSection();
    }

    document.getElementById('internSelect').addEventListener('change', function() {
      currentInternIdx = parseInt(this.value);
      renderAll();
    });

    function renderAll() {
      renderReports();
      renderEndOfInternshipSection();
    }

    // Initial render
    renderAll();
  </script>
</body>
</html> 