<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Feedback Management - EduLink</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    
    * {
      font-family: 'Inter', sans-serif;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .card-hover {
      transition: all 0.3s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .sidebar-gradient {
      background: linear-gradient(180deg, #1e3a8a 0%, #1e40af 50%, #3b82f6 100%);
    }
    
    .glass-effect {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.95);
    }
    
    .status-badge {
      @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
    }
    
    .status-pending {
      @apply bg-yellow-100 text-yellow-800;
    }
    
    .status-completed {
      @apply bg-green-100 text-green-800;
    }
    
    .status-reviewed {
      @apply bg-blue-100 text-blue-800;
    }
    
    .main-content {
      margin-left: 280px;
      transition: margin-left 0.3s ease;
    }
    
    .main-content {
      margin-left: 280px;
      transition: margin-left 0.3s ease;
    }
    
    @media (max-width: 1024px) {
      .main-content {
        margin-left: 0;
      }
      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }
      .sidebar.open {
        transform: translateX(0);
      }
    }
    
    .card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }
    
    .stats-card {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: all 0.3s ease;
    }
    
    .stats-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }
    
    .mobile-menu-overlay {
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen">
  <!-- Mobile Menu Overlay -->
  <div id="mobile-menu-overlay" class="fixed inset-0 mobile-menu-overlay z-40 lg:hidden hidden"></div>
  
  <!-- Sidebar Container -->
  <aside id="sidebar" class="w-72 sidebar-gradient text-white min-h-screen p-6 fixed top-0 left-0 z-40 transform -translate-x-full md:translate-x-0 transition-transform duration-300 shadow-2xl">
    <!-- Logo Section -->
    <div class="flex items-center mb-8">
      <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center mr-3">
        <i class="fas fa-graduation-cap text-blue-600 text-xl"></i>
      </div>
      <div>
        <h1 class="text-xl font-bold">EduLink</h1>
        <p class="text-blue-200 text-sm">Institution Portal</p>
      </div>
    </div>
    
    <!-- User Profile -->
    <div class="bg-white/10 rounded-xl p-4 mb-6 backdrop-blur-sm">
      <div class="flex items-center">
        <div class="w-12 h-12 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center">
          <i class="fas fa-user text-white"></i>
        </div>
        <div class="ml-3">
          <p class="font-semibold">Dr. Sarah Johnson</p>
          <p class="text-blue-200 text-sm">Institution Supervisor</p>
        </div>
      </div>
    </div>
    
    <!-- Navigation -->
    <nav class="space-y-2">
      <a href="academic_supervision_hub.html" class="flex items-center py-3 px-4 rounded-xl hover:bg-white/10 text-blue-100 hover:text-white transition-all duration-200">
        <i class="fas fa-chart-line mr-3 w-5"></i>
        Dashboard
      </a>
      <a href="institution_assigned_interns.html" class="flex items-center py-3 px-4 rounded-xl hover:bg-white/10 text-blue-100 hover:text-white transition-all duration-200">
        <i class="fas fa-users mr-3 w-5"></i>
        Assigned Interns
      </a>
      <a href="institution_logbooks.html" class="flex items-center py-3 px-4 rounded-xl hover:bg-white/10 text-blue-100 hover:text-white transition-all duration-200">
        <i class="fas fa-book mr-3 w-5"></i>
        Logbooks
      </a>
      <a href="institution_supervisor_feedback.html" class="flex items-center py-3 px-4 rounded-xl bg-white/20 text-white font-medium transition-all duration-200">
        <i class="fas fa-comment-dots mr-3 w-5"></i>
        Feedback
      </a>
      <a href="#" class="flex items-center py-3 px-4 rounded-xl hover:bg-white/10 text-blue-100 hover:text-white transition-all duration-200">
        <i class="fas fa-chart-bar mr-3 w-5"></i>
        Reports
      </a>
      <a href="#" class="flex items-center py-3 px-4 rounded-xl hover:bg-white/10 text-blue-100 hover:text-white transition-all duration-200">
        <i class="fas fa-cog mr-3 w-5"></i>
        Settings
      </a>
    </nav>
    
    <!-- Logout Button -->
    <div class="absolute bottom-6 left-6 right-6">
      <button class="w-full flex items-center justify-center py-3 px-4 rounded-xl bg-red-500/20 hover:bg-red-500/30 text-red-200 hover:text-white transition-all duration-200">
        <i class="fas fa-sign-out-alt mr-2"></i>
        Logout
      </button>
    </div>
  </aside>
  
  <!-- Mobile Menu Button -->
  <button id="mobileMenuBtn" class="md:hidden fixed top-4 left-4 z-50 bg-white p-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200">
    <i class="fas fa-bars text-gray-600"></i>
  </button>
  
  <!-- Main Content -->
  <main class="main-content min-h-screen p-6">
    <!-- Header -->
    <header class="glass-effect border-b border-white/20 p-6 sticky top-0 z-30">
      <div class="flex justify-between items-center">
        <div>
          <h1 class="text-2xl font-bold text-gray-800">Good morning, Dr. Sarah Johnson!</h1>
          <p class="text-gray-600 mt-1">Review and provide feedback on intern logbooks</p>
        </div>
        <div class="flex items-center space-x-4">
          <!-- Notifications -->
          <div class="relative">
            <button class="p-2 rounded-full bg-white shadow-md hover:shadow-lg transition-all duration-200">
              <i class="fas fa-bell text-gray-600"></i>
              <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></span>
            </button>
          </div>
          <!-- Messages -->
          <div class="relative">
            <button class="p-2 rounded-full bg-white shadow-md hover:shadow-lg transition-all duration-200">
              <i class="fas fa-envelope text-gray-600"></i>
              <span class="absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full"></span>
            </button>
          </div>
          <!-- Profile -->
          <div class="flex items-center space-x-3">
            <div class="w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center">
              <i class="fas fa-user text-white text-sm"></i>
            </div>
          </div>
        </div>
      </div>
    </header>

    <div class="p-6">
      <div class="max-w-6xl mx-auto">
        <!-- Stats Cards -->
         <div class="mb-8">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
          <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 card-hover">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-gray-600 mb-2">Total Reviews</p>
                <p class="text-3xl font-bold text-gray-900 mb-1">24</p>
                <p class="text-xs text-green-600 font-medium">+12% this week</p>
              </div>
              <div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg">
                <i class="fas fa-clipboard-list text-white text-xl"></i>
              </div>
            </div>
          </div>
          
          <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 card-hover">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-gray-600 mb-2">Pending</p>
                <p class="text-3xl font-bold text-gray-900 mb-1">8</p>
                <p class="text-xs text-orange-600 font-medium">-3 from yesterday</p>
              </div>
              <div class="w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg">
                <i class="fas fa-clock text-white text-xl"></i>
              </div>
            </div>
          </div>
          
          <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 card-hover">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-gray-600 mb-2">Completed</p>
                <p class="text-3xl font-bold text-gray-900 mb-1">16</p>
                <p class="text-xs text-green-600 font-medium">+8% this week</p>
              </div>
              <div class="w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg">
                <i class="fas fa-check-circle text-white text-xl"></i>
              </div>
            </div>
          </div>
          
          <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 card-hover">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-gray-600 mb-2">Avg. Rating</p>
                <p class="text-3xl font-bold text-gray-900 mb-1">4.2</p>
                <p class="text-xs text-blue-600 font-medium">+0.3 this month</p>
              </div>
              <div class="w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
                <i class="fas fa-star text-white text-xl"></i>
              </div>
            </div>
          </div>
        </div>
        </div>

        <!-- Intern Selection -->
      <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-xl font-bold text-gray-800">
            <i class="fas fa-user-graduate text-blue-600 mr-2"></i>
            Select Intern
          </h2>
          <div class="flex items-center space-x-4">
            <div class="flex items-center space-x-2">
              <i class="fas fa-filter text-gray-500"></i>
              <select id="departmentFilter" class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                <option value="all">All Departments</option>
                <option value="cs">Computer Science</option>
                <option value="eng">Engineering</option>
                <option value="bus">Business</option>
              </select>
            </div>
          </div>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div>
            <label for="internSelect" class="block text-sm font-medium text-gray-700 mb-3">
              <i class="fas fa-users mr-2"></i>
              Choose Intern to Review
            </label>
            <select id="internSelect" class="w-full border-2 border-gray-300 p-4 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none transition-all duration-200 bg-white">
              <option value="0">Alice Johnson - Computer Science</option>
              <option value="1">Brian Smith - Engineering</option>
            </select>
          </div>
          
          <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6">
            <h3 class="font-semibold text-gray-800 mb-3">
              <i class="fas fa-info-circle text-purple-600 mr-2"></i>
              Quick Stats
            </h3>
            <div class="grid grid-cols-2 gap-4 text-sm">
              <div>
                <p class="text-gray-600">Total Weeks</p>
                <p class="font-bold text-gray-800">12</p>
              </div>
              <div>
                <p class="text-gray-600">Reviewed</p>
                <p class="font-bold text-green-600">8</p>
              </div>
              <div>
                <p class="text-gray-600">Pending</p>
                <p class="font-bold text-orange-600">4</p>
              </div>
              <div>
                <p class="text-gray-600">Progress</p>
                <p class="font-bold text-purple-600">67%</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Weekly Reports Section -->
        <div id="reportsSection" class="space-y-6">
          <!-- Dynamic content will be inserted here -->
        </div>
      </div>
    </div>
  </main>

  <script>
    // Mobile menu toggle
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const sidebar = document.getElementById('sidebar');

    mobileMenuBtn.addEventListener('click', () => {
      sidebar.classList.toggle('-translate-x-full');
    });

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', (e) => {
      if (window.innerWidth < 768 && !sidebar.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
        sidebar.classList.add('-translate-x-full');
      }
    });
  </script>
  <script>
    // Sample data
    const interns = [
      {
        name: 'Alice',
        dailyReports: [
          ['Completed onboarding', 'Started project research', 'Attended team meeting', 'Worked on documentation', 'Reviewed code'],
          ['Developed project plan', 'Met with mentor', 'Worked on feature X', 'Tested feature X', 'Prepared weekly summary']
        ],
        weeklyReports: [
          'Week 1: Completed onboarding and started project research.',
          'Week 2: Developed initial project plan and met with team.'
        ],
        institutionComments: [
          'Institution: Keep up the good work.',
          ''
        ],
        institutionCommentsVisible: [
          true,
          true
        ],
        companyComments: [
          'Great work, Alice!',
          ''
        ]
      },
      {
        name: 'Brian',
        dailyReports: [
          ['Assisted with data entry', 'Learned about company systems', 'Shadowed a senior', 'Helped with filing', 'Attended training'],
          ['Prepared weekly reports', 'Attended training', 'Worked on data cleanup', 'Helped with presentations', 'Met with supervisor']
        ],
        weeklyReports: [
          'Week 1: Assisted with data entry and learned about company systems.',
          'Week 2: Helped prepare weekly reports and attended training.'
        ],
        institutionComments: [
          '',
          ''
        ],
        institutionCommentsVisible: [
          true,
          true
        ],
        companyComments: [
          '',
          ''
        ]
      }
    ];

    function renderReports() {
      const intern = interns[currentInternIdx];
      let html = '';
      
      for (let wIdx = 0; wIdx < intern.weeklyReports.length; wIdx++) {
        html += `
          <div class="card rounded-2xl overflow-hidden mb-8">
            <!-- Week Header -->
            <div class="bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-6">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div class="w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center">
                    <i class="fas fa-calendar-week text-white"></i>
                  </div>
                  <div>
                    <h2 class="text-2xl font-bold">Week ${wIdx + 1}</h2>
                    <p class="text-white/80 text-sm">Internship Progress Review</p>
                  </div>
                </div>
                <div class="text-right">
                  <p class="text-white/80 text-sm">Status</p>
                  <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-white/20 text-white">
                    <i class="fas fa-${intern.institutionComments[wIdx] ? 'check' : 'clock'} mr-1"></i>
                    ${intern.institutionComments[wIdx] ? 'Reviewed' : 'Pending'}
                  </span>
                </div>
              </div>
            </div>
            
            <!-- Daily Reports -->
            <div class="p-8 border-b border-gray-100">
              <h3 class="text-xl font-bold text-gray-800 mb-6">
                <i class="fas fa-tasks text-blue-600 mr-2"></i>
                Daily Activities
              </h3>
              <div class="grid gap-4">
                ${intern.dailyReports[wIdx].map((day, dIdx) => `
                  <div class="flex items-start space-x-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl">
                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                      <span class="text-blue-600 font-bold text-sm">${dIdx + 1}</span>
                    </div>
                    <div class="flex-1">
                      <p class="text-gray-700 font-medium">Day ${dIdx + 1}</p>
                      <p class="text-gray-600 mt-1">${day}</p>
                    </div>
                  </div>
                `).join('')}
              </div>
            </div>

            <!-- Weekly Report -->
            <div class="p-8 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-blue-50">
              <h3 class="text-xl font-bold text-gray-800 mb-4">
                <i class="fas fa-file-alt text-purple-600 mr-2"></i>
                Weekly Summary
              </h3>
              <div class="bg-white rounded-xl p-6 border border-gray-200">
                <p class="text-gray-700 leading-relaxed">${intern.weeklyReports[wIdx]}</p>
              </div>
            </div>

            <!-- Institution Supervisor Feedback -->
            <div class="p-8 border-b border-gray-100">
              <h3 class="text-xl font-bold text-gray-800 mb-6">
                <i class="fas fa-comment-dots text-green-600 mr-2"></i>
                Your Feedback
              </h3>
              <form onsubmit="submitInstitutionComment(event, ${wIdx})">
                <div class="mb-6">
                  <textarea 
                    id="institutionCommentInput${wIdx}" 
                    class="w-full border-2 border-gray-300 p-4 rounded-xl mb-4 min-h-[120px] focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none transition-all duration-200 resize-none"
                    placeholder="Provide detailed feedback on the intern's performance, areas of improvement, and recommendations..."
                  >${intern.institutionComments[wIdx] || ''}</textarea>
                </div>
                
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0">
                  <div class="flex items-center space-x-3">
                    <input 
                      type="checkbox" 
                      id="visibleToStudent${wIdx}" 
                      class="w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500 focus:ring-2"
                      ${intern.institutionCommentsVisible[wIdx] ? 'checked' : ''}
                    >
                    <label for="visibleToStudent${wIdx}" class="text-sm font-medium text-gray-700 flex items-center">
                      <i class="fas fa-eye mr-2 text-gray-500"></i>
                      Make visible to student
                    </label>
                  </div>
                  <button type="submit" class="btn-primary text-white px-8 py-3 rounded-xl font-semibold flex items-center space-x-2">
                    <i class="fas fa-save"></i>
                    <span>Save Feedback</span>
                  </button>
                </div>
              </form>
              
              ${intern.institutionComments[wIdx] ? `
                <div class="mt-6 p-6 ${intern.institutionCommentsVisible[wIdx] ? 'bg-green-50 border-green-200' : 'bg-yellow-50 border-yellow-200'} border-2 rounded-xl">
                  <div class="flex items-center space-x-2 mb-3">
                    <i class="fas fa-${intern.institutionCommentsVisible[wIdx] ? 'check-circle text-green-600' : 'eye-slash text-yellow-600'}"></i>
                    <span class="text-sm font-bold ${intern.institutionCommentsVisible[wIdx] ? 'text-green-800' : 'text-yellow-800'}">
                      Saved Feedback (${intern.institutionCommentsVisible[wIdx] ? 'Visible to Student' : 'Hidden from Student'})
                    </span>
                  </div>
                  <div class="text-gray-700 bg-white rounded-lg p-4 border">${intern.institutionComments[wIdx]}</div>
                </div>
              ` : ''}
            </div>

            <!-- Company Supervisor's Comments -->
            <div class="p-8 bg-gradient-to-r from-gray-50 to-purple-50">
              <h3 class="text-xl font-bold text-gray-800 mb-4">
                <i class="fas fa-building text-blue-600 mr-2"></i>
                Company Supervisor's Comments
              </h3>
              <div class="bg-white rounded-xl p-6 border border-gray-200">
                ${intern.companyComments[wIdx] ? `
                  <p class="text-gray-700 leading-relaxed">${intern.companyComments[wIdx]}</p>
                ` : `
                  <div class="text-center py-8">
                    <i class="fas fa-comment-slash text-gray-300 text-4xl mb-4"></i>
                    <p class="text-gray-400 font-medium">No comments from company supervisor yet</p>
                    <p class="text-gray-400 text-sm mt-2">Comments will appear here once submitted</p>
                  </div>
                `}
              </div>
            </div>
          </div>
        `;
      }
      
      document.getElementById('reportsSection').innerHTML = html;
    }

    let currentInternIdx = 0;

    window.submitInstitutionComment = function(e, wIdx) {
      e.preventDefault();
      const val = document.getElementById('institutionCommentInput' + wIdx).value.trim();
      const visible = document.getElementById('visibleToStudent' + wIdx).checked;
      interns[currentInternIdx].institutionComments[wIdx] = val;
      interns[currentInternIdx].institutionCommentsVisible[wIdx] = visible;
      renderReports();
    }

    document.getElementById('internSelect').addEventListener('change', function() {
      currentInternIdx = parseInt(this.value);
      renderReports();
    });

    // Initial render
    renderReports();
  </script>
</body>
</html>